"use strict";(self.webpackChunkAngweb3=self.webpackChunkAngweb3||[]).push([[554],{7554:(H,u,r)=>{r.r(u),r.d(u,{Erc20Module:()=>V});var p=r(6895),d=r(9965),b=r(7127),g=r(5861),v=r(1317),m=r(5687),f=r(9834),C=r(9751),A=r(7579),M=r(6897);class E extends M.V{constructor(a,t,n){console.log("addres for usdc",n),super(a,t,n),this._subscriptionSymbol=this.symbol().subscribe(o=>{this._subscriptionSymbol.unsubscribe()})}name(){return this.call(this.getContractABI(),"name")}symbol(){if(this._symbol)return new C.y(a=>{a.next({success:!0,result:this._symbol})});{const a=new A.x;this.call(this.getContractABI(),"symbol").subscribe(a);const t=a.subscribe(n=>{n.success&&(this._symbol=n.result,t.unsubscribe())});return a.asObservable()}}decimals(){return this.call(this.getContractABI(),"decimals")}totalSupply(){return this.call(this.getContractABI(),"totalSupply")}balanceOf(a){return this.callBN(this.getContractABI(),"balanceOf",a)}allowance(a,t){return this.callBN(this.getContractABI(),"allowance",a,t)}transfer(a,t,n){const o=`Transaction to tranfer ${t.toString()} ${this._symbol}  to ${a} was sent successfully`,c=`Transaction to tranfer ${t.toString()} ${this._symbol}  to ${a} was confirmed`;return this.send(this.getContractABI(),"transfer",o,n,c,a,t)}transferFrom(a,t,n,o){const c=`Transaction to tranfer ${n.toString()} ${this._symbol} from ${a} to ${t} was sent successfully`,l=`Transaction to tranfer ${n.toString()} ${this._symbol}  from ${a} to ${t} was confirmed`;return this.send(this.getContractABI(),"transferFrom",c,o,l,a,t,n)}approve(a,t,n){return this.send(this.getContractABI(),"approve",`Transaction to approve allowance of ${t} ${this._symbol} to ${a} was sent successfully`,n,`Transaction to approve allowance of ${t} ${this._symbol} to ${a} was confirmed`,a,t)}}const B_usdc=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_data",type:"bytes"}],name:"transferAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_subtractedValue",type:"uint256"}],name:"decreaseApproval",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_addedValue",type:"uint256"}],name:"increaseApproval",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"},{indexed:!1,name:"data",type:"bytes"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}];var e=r(1571),T=r(529);let R=(()=>{class s extends E{constructor(t,n,o,c){super(c,n,n.currentConfig.contracts.USDC),this.provider=t,this.wallet=n,this.http=o}getContractABI(){return B_usdc}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(v.$),e.LFG(m.N),e.LFG(T.eN),e.LFG(f.t))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var i=r(433);const S=JSON.parse('{"required":"Field is required","minlength":"Field must be at least {0} characters long","maxlength":"Field must be at most {0} characters long","min":"Field must be at least {0}","max":"Field must be at most {0}","pattern":"Field is invalid","email":"Field must be a valid email address","ethereumAccount":"Field must be a valid Ethereum account address"}');var x=r.t(S,2);class Z{constructor(){this.errorMessages={},this.submitted=!1,this.errorMessages=x}hasError(a,t){return this.form.controls[a].hasError(t)}getErrorMessage(a){if(!this.form.controls[a].dirty&&!this.form.controls[a].touched&&!this.submitted)return null;for(let t in this.form.controls[a].errors){if(this.errorMessages[t]&&-1==this.errorMessages[t].indexOf("{0}"))return this.errorMessages[t];if(this.errorMessages[t]){const n=Object.values(this.form.controls[a].getError(t))[0];return`${this.errorMessages[t]}`.replace("{0}",n)}return t}return null}getAllErrors(){let a=[];for(let t in this.form.controls)for(let n in this.form.controls[t].errors)a.push(this.errorMessages[n]?`${t} ${this.errorMessages[n]}`:`${t} ${n}`);return a}}var $=r(2172);function F(s){return 42==s.value.trim().length||/^0x[0-9a-fA-F]+$/.test(s.value)?null:{ethereumAddress:!0}}var h=r(5593),w=r(1740),y=r(1795);function O(s,a){if(1&s&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij("",t.getErrorMessage("accountAddress")," ")}}let I=(()=>{class s extends Z{constructor(t,n,o){super(),this._formBuilder=t,this._messageService=n,this._numberService=o,this.symbol="",this.decimals=1,this.isLoading=!1,this.showBalance=!1,this.formatedBalance="0",this.formatedBalanceTooltip="0"}ngOnInit(){this.form=this._formBuilder.group({accountAddress:["",[i.kI.required,i.kI.minLength(42),F]]})}getBalance(){if(this.submitted=!0,this.form.valid){this.isLoading=!0,this.showBalance=!0;try{this.contractERC20.balanceOf(this.form.get("accountAddress").value).subscribe(t=>{if(0==t.success)return this._messageService.showToast(`It was not possible to get ${this.form.controls.accountAddress.value} ${this.symbol} balance`),void(this.showBalance=!1);this.formatedBalance=this._numberService.formatBNShortScale(t.result,this.decimals),this.formatedBalanceTooltip=this._numberService.formatBN(t.result,this.decimals),this.isLoading=!1})}catch(t){this.isLoading=!1,this._messageService.showToast(t.message)}}else this.showBalance=!1,this._messageService.showToast("The data filled in the form is not valid. Please, fill the form correctly before submit it")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(i.qu),e.Y36(f.t),e.Y36($.G))},s.\u0275cmp=e.Xpm({type:s,selectors:[["erc20-balance"]],inputs:{contractERC20:"contractERC20",symbol:"symbol",decimals:"decimals"},features:[e.qOj],decls:13,vars:4,consts:[[1,"container",3,"formGroup"],[1,"card","p-fluid"],[1,"field"],["htmlFor","accountAddress"],["pInputText","","id","accountAddress","formControlName","accountAddress","maxlength","42","minlength","40","type","text"],[4,"ngIf"],["pButton","","pRipple","","label","Submit","icon","pi pi-bookmark",3,"close"],[1,"balance"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h5"),e._uU(3,"Allowance"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"accountAddress"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,O,2,1,"small",5),e.qZA(),e.TgZ(9,"div",2)(10,"button",6),e.NdJ("close",function(){return n.getBalance()}),e.qZA()()()(),e.TgZ(11,"div",7),e._uU(12),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(8),e.Q6J("ngIf",n.getErrorMessage("accountAddress")),e.xp6(4),e.AsE(" ",n.formatedBalance," ",n.symbol," "))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.wO,i.nD,i.sg,i.u,h.Hq,p.O5,w.o,y.H],styles:[".container[_ngcontent-%COMP%]{padding-top:5px}.input_40characters[_ngcontent-%COMP%]{width:45ch}.value-container[_ngcontent-%COMP%]{display:flex;gap:5px;padding-top:25px;padding-bottom:15px;align-items:center}.value-label[_ngcontent-%COMP%]{font-weight:500}.balance[_ngcontent-%COMP%]{color:#3f51b5;font-size:x-large}"]}),s})();var L=r(805),N=r(99);function J(s,a){1&s&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"property"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"value"),e.qZA(),e._uU(5," > "),e.qZA())}function U(s,a){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&s){const t=a.$implicit;e.xp6(2),e.Oqu(t.property),e.xp6(2),e.Oqu(t.value)}}const j=function(){return{"min-width":"50rem"}};let Y=(()=>{class s{constructor(){this.metadataRead=new e.vpe,this.displayedResultColumns=[{propertyName:"property",headerTitle:"Property"},{propertyName:"value",headerTitle:"Value"}],this.isLoading=0,this.metadata=[]}ngOnInit(){this.isLoading++,this.contractERC20.name().subscribe(t=>{this.addMetadata("name",t)}),this.isLoading++,this.contractERC20.symbol().subscribe(t=>{this.addMetadata("symbol",t)}),this.isLoading++,this.contractERC20.decimals().subscribe(t=>{this.addMetadata("decimals",t)}),this.isLoading++,this.contractERC20.totalSupply().subscribe(t=>{this.addMetadata("totalSuppy",t)})}addMetadata(t,n){const o={property:t,value:n.success?n.result:`Failed: ${n.result}`};this.isLoading--,this.metadata=[...this.metadata,o].sort((c,l)=>c.property.localeCompare(l.property)),this.metadataRead.emit(o)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["erc20-metadata"]],inputs:{contractERC20:"contractERC20"},outputs:{metadataRead:"metadataRead"},decls:3,vars:3,consts:[[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"]],template:function(t,n){1&t&&(e.TgZ(0,"p-table",0),e.YNc(1,J,6,0,"ng-template",1),e.YNc(2,U,5,2,"ng-template",2),e.qZA()),2&t&&e.Q6J("value",n.metadata)("tableStyle",e.DdM(2,j))},dependencies:[L.jx,N.iA],styles:[".container[_ngcontent-%COMP%]{padding-top:5px}"]}),s})();const P=[{path:"",component:b.F,children:[{path:"",component:(()=>{class s{constructor(t,n){this._web3Service=t,this.erc20Service=n,this.userAccountAddress="0x6E0B6FF7536100a9e6b7041CA5a98108935932e5",this.formatedBalance="0",this.formatedBalanceTooltip="0",this.metadata={}}ngOnInit(){}onApproveClicked(){var t=this;this._web3Service.getUserAccountAddressSubject().subscribe(function(){var n=(0,g.Z)(function*(o){t.userAccountAddress=o});return function(o){return n.apply(this,arguments)}}())}onMetadataRead(t){this.metadata[t.property]="decimals"==t.property?parseInt(t.value):t.value}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(m.N),e.Y36(R))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-erc20"]],decls:8,vars:4,consts:[[1,"col-12","md:col-12"],[1,"p-inputgroup"],[1,"col-12","md:col-12",3,"contractERC20","symbol","decimals"],["pButton","","pRipple","","type","button","label","Write",1,"p-button-secondary","mr-2","mb-2",3,"click"],[1,"col-12","md:col-4"],[3,"contractERC20","metadataRead"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"erc20-balance",2),e.qZA()(),e.TgZ(3,"div",0)(4,"div",1)(5,"button",3),e.NdJ("click",function(){return n.onApproveClicked()}),e.qZA()()(),e.TgZ(6,"div",4)(7,"erc20-metadata",5),e.NdJ("metadataRead",function(c){return n.onMetadataRead(c)}),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("contractERC20",n.erc20Service)("symbol",n.metadata.symbol)("decimals",n.metadata.decimals),e.xp6(5),e.Q6J("contractERC20",n.erc20Service))},dependencies:[I,Y,h.Hq,y.H]}),s})()}]}];let z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),s})();var Q=r(9857);let V=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,Q.m,z]}),s})()}}]);