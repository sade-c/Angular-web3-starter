"use strict";(self.webpackChunkAngweb3=self.webpackChunkAngweb3||[]).push([[783],{6783:(O,w,i)=>{i.r(w),i.d(w,{GreeterModule:()=>z});var M=i(6895),A=i(9965),T=i(7127),a=i(9671),u=i(433);const S=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_greeting","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"GreeterError","type":"error"},{"inputs":[],"name":"greet","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"greeting","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_greeting","type":"string"}],"name":"setGreeting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"throwError","outputs":[],"stateMutability":"pure","type":"function"}]}');var B=i(1317),C=i(4286),h=i(9751),E=i(1135),j=i(8538),x=i.n(j),G=i(4315);class N{constructor(e,t,n){this._messageService=e,this._web3Service=t,this._eventListeners={},this.address=n,this._web3Service.getUserAccountAddressSubject().subscribe(o=>{this._fromAccount=o})}getContract(e){var t=this;return(0,a.Z)(function*(){if(null!=t.contract)return t.contract;if(t._web3Service){const n=yield t._web3Service.getContract(e,t.address);if(null==n)throw new Error("Contract not found. Confirm that your wallet is connected on the right chain");return n}throw new Error("Web3 not instanciated")})()}owner(){return new h.y(e=>{this._owner?e.next(this._owner):this.getString(this.getContractABI(),"owner").then(t=>{this._owner=t,e.next(this._owner)})})}isOwner(){return new h.y(e=>{this.owner().subscribe(t=>{this._web3Service.getUserAccountAddressSubject().subscribe(n=>{e.next(t===n)})})})}getEventBehaviorSubject(e){var t=this;return(0,a.Z)(function*(){const n=yield t.getContract(t.getContractABI()),o=t._validateEventAndInstanceSubject(n,e.eventName,e.filter),c=o.key;if(o.new){let d;e.filter&&(d={filter:e.filter}),n.events[e.eventName](d).on("data",g=>{t._eventListeners[c]&&t._eventListeners[c].next(g.returnValues)}).on("error",g=>{console.error(e.eventName,g)})}return t._eventListeners[c]})()}getWeb3EventSubscription(e){var t=this;return(0,a.Z)(function*(){return(yield t.getContract(t.getContractABI())).events[e.eventName](e)})()}allWeb3Events(){var e=this;return(0,a.Z)(function*(){return(yield e.getContract(e.getContractABI())).getPastEvents("allEvents")})()}getWeb3PastEventSubscription(e){var t=this;return(0,a.Z)(function*(){return(yield t.getContract(t.getContractABI())).getPastEvents(e.eventName,e)})()}_validateEventAndInstanceSubject(e,t,n){if(e.events[t]){let o=!1;const c=n?t.concat(JSON.stringify(n)):t;return this._eventListeners[c]||(this._eventListeners[c]=new E.X(null),o=!0),{new:o,key:c}}throw new Error(`Event '${t}' does not exists in the contract`)}call(e,t,...n){return this.callPrivate(e,t,this.justReturnV,...n)}callBN(e,t,...n){return this.callPrivate(e,t,o=>new(x())(o),...n)}send(e,t,n,o,c,...d){return new h.y(p=>{this.getContract(e).then(g=>{let f;this._web3Service.getUserAccountAddressSubject().subscribe(function(){var m=(0,a.Z)(function*(v){try{f=yield g.methods[t](...d).send({from:v}).on("transactionHash",l=>{p.next({success:!0,result:n})}).once("confirmation",(l,y,b)=>{o&&o({success:!0,result:c||""})})}catch(l){const y=G.M[l.code];console.log(l.message);let b="We had some problem. The transaction wasn't sent.";y&&(b=`${y.title}: ${y.message}. The transaction wasn't sent.`),console.warn(l),o?o({success:!1,result:b}):p.next({success:!1,result:b})}});return function(v){return m.apply(this,arguments)}}())})})}getString(e,t){return this.getProperty(e,t)}getStringArray(e,t){return this.getProperty(e,t)}getBoolean(e,t){var n=this;return(0,a.Z)(function*(){return n.getProperty(e,t)})()}getNumber(e,t){return this.getProperty(e,t)}getBN(e,t){return this.getProperty(e,t)}getProperty(e,t){var n=this;return(0,a.Z)(function*(){try{return yield(yield n.getContract(e)).methods[t]().call({from:n._fromAccount})}catch(o){console.error(o),n._messageService.showMessageAlert("Error",`Unexpected exception when fetching '${t}': ${o.message}`)}})()}justReturnV(e){return e}callPrivate(e,t,n=this.justReturnV,...o){return new h.y(c=>{this.getContract(e).then(d=>{let p;this._web3Service.getUserAccountAddressSubject().subscribe(function(){var g=(0,a.Z)(function*(f){try{p=yield d.methods[t](...o).call({from:f}),c.next({success:!0,result:n(p)})}catch(m){const v=G.M[m.code];let l="We had some problem. The transaction wasn't sent.";v&&(l=`${v.title}: ${v.message}. The transaction wasn't sent.`),console.warn(m),c.next({success:!1,result:l})}});return function(f){return g.apply(this,arguments)}}())})})}}var Z=i(9834),r=i(1571),J=i(529);let L=(()=>{class s extends N{constructor(t,n,o,c){super(c,n,n.currentConfig.contracts.Greeter),this.provider=t,this.wallet=n,this.http=o}getContractABI(){return S.Mt}greet(){var t=this;return(0,a.Z)(function*(){let n=yield yield t.getString(S.Mt,"greet");return console.log(n),n})()}finalSetGreetings(t,n){return this.send(S.Mt,"setGreeting",`Transaction to send  ${t} was sent successfully`,n,`Transaction to finalize tchanged ${t} was confirmed`,t)}}return s.\u0275fac=function(t){return new(t||s)(r.LFG(B.$),r.LFG(C.N),r.LFG(J.eN),r.LFG(Z.t))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var F=i(5593),I=i(1740),$=i(1795);const R=[{path:"",component:T.F,children:[{path:"",component:(()=>{class s{constructor(t,n,o){this.wallet=t,this.greeterService=n,this._messageService=o,this.gform=new u.nJ({saysame:new u.p4("")})}greetMe(){var t=this;return(0,a.Z)(function*(){t.greet=yield t.greeterService.greet(),console.log(t.greet)})()}onApproveClicked(){var t=this;return(0,a.Z)(function*(){console.log("onApproveClicked"),yield t.greeterService.finalSetGreetings(t.gform.value.saysame).subscribe(n=>{t._messageService.showMessageAlert(n.success?"info":"error",n.result)})})()}}return s.\u0275fac=function(t){return new(t||s)(r.Y36(C.N),r.Y36(L),r.Y36(Z.t))},s.\u0275cmp=r.Xpm({type:s,selectors:[["app-greet"]],decls:22,vars:2,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"formgroup-inline"],[1,"field"],["pButton","","pRipple","","type","button","label","Get Greet",1,"p-button-secondary","mr-2","mb-2",3,"click"],[1,"font-medium","ml-2"],[1,"normal-text-color",3,"formGroup"],[1,"col-12","md:col-4"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["type","text","pInputText","","placeholder","sayed","formControlName","saysame"],["pButton","","pRipple","","type","button","label","Write",1,"p-button-secondary","mr-2","mb-2",3,"click"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),r._uU(4,"Read Contract"),r.qZA(),r.TgZ(5,"div",3)(6,"div",4)(7,"button",5),r.NdJ("click",function(){return n.greetMe()}),r.qZA()(),r.TgZ(8,"div",4)(9,"span",6),r._uU(10),r.qZA()()()()(),r.TgZ(11,"div",1)(12,"div",2)(13,"form",7)(14,"div",8)(15,"div",9)(16,"span",10),r._uU(17,"Say Sameting"),r.qZA(),r._UZ(18,"input",11),r.qZA()(),r.TgZ(19,"div",8)(20,"div",9)(21,"button",12),r.NdJ("click",function(){return n.onApproveClicked()}),r.qZA()()()()()()()),2&t&&(r.xp6(10),r.hij(" ",n.greet," "),r.xp6(3),r.Q6J("formGroup",n.gform))},dependencies:[u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,F.Hq,I.o,$.H]}),s})()}]}];let W=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[A.Bz.forChild(R),A.Bz]}),s})();var P=i(189);let z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[M.ez,u.u5,W,P.m]}),s})()}}]);