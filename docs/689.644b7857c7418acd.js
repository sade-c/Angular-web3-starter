"use strict";(self.webpackChunkAngweb3=self.webpackChunkAngweb3||[]).push([[689],{6689:(O,S,i)=>{i.r(S),i.d(S,{GreeterModule:()=>z});var M=i(6895),A=i(9965),j=i(7127),a=i(9671),u=i(433);const w=JSON.parse('{"Mt":[{"inputs":[{"internalType":"string","name":"_greeting","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"GreeterError","type":"error"},{"inputs":[],"name":"greet","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"greeting","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_greeting","type":"string"}],"name":"setGreeting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"throwError","outputs":[],"stateMutability":"pure","type":"function"}]}');var T=i(1317),C=i(5687),B=i(8538),E=i.n(B),h=i(9751),x=i(1135),G=i(4315);class N{constructor(t,e,n){this._messageService=t,this._web3Service=e,this._eventListeners={},this.address=n,this._web3Service.getUserAccountAddressSubject().subscribe(o=>{this._fromAccount=o})}getContract(t){var e=this;return(0,a.Z)(function*(){if(null!=e.contract)return e.contract;if(e._web3Service){const n=yield e._web3Service.getContract(t,e.address);if(null==n)throw new Error("Contract not found. Confirm that your wallet is connected on the right chain");return n}throw new Error("Web3 not instanciated")})()}owner(){return new h.y(t=>{this._owner?t.next(this._owner):this.getString(this.getContractABI(),"owner").then(e=>{this._owner=e,t.next(this._owner)})})}isOwner(){return new h.y(t=>{this.owner().subscribe(e=>{this._web3Service.getUserAccountAddressSubject().subscribe(n=>{t.next(e===n)})})})}getEventBehaviorSubject(t){var e=this;return(0,a.Z)(function*(){const n=yield e.getContract(e.getContractABI()),o=e._validateEventAndInstanceSubject(n,t.eventName,t.web3jsParameters),c=o.key;if(o.new){let d;t.web3jsParameters&&(d={filter:t.web3jsParameters}),n.events[t.eventName](d).on("data",g=>{e._eventListeners[c]&&e._eventListeners[c].next(g.returnValues)}).on("error",g=>{console.error(t.eventName,g)})}return e._eventListeners[c]})()}getWeb3EventSubscription(t){var e=this;return(0,a.Z)(function*(){return(yield e.getContract(e.getContractABI())).events[t.eventName](t)})()}allWeb3Events(){var t=this;return(0,a.Z)(function*(){return(yield t.getContract(t.getContractABI())).getPastEvents("allEvents")})()}getWeb3PastEventSubscription(t){var e=this;return(0,a.Z)(function*(){return(yield e.getContract(e.getContractABI())).getPastEvents(t.eventName,t.web3jsParameters)})()}_validateEventAndInstanceSubject(t,e,n){if(t.events[e]){let o=!1;const c=n?e.concat(JSON.stringify(n)):e;return this._eventListeners[c]||(this._eventListeners[c]=new x.X(null),o=!0),{new:o,key:c}}throw new Error(`Event '${e}' does not exists in the contract`)}call(t,e,...n){return this.callPrivate(t,e,this.justReturnV,...n)}callBN(t,e,...n){return this.callPrivate(t,e,o=>new(E())(o),...n)}send(t,e,n,o,c,...d){return new h.y(p=>{this.getContract(t).then(g=>{let f;this._web3Service.getUserAccountAddressSubject().subscribe(function(){var m=(0,a.Z)(function*(v){try{f=yield g.methods[e](...d).send({from:v}).on("transactionHash",l=>{p.next({success:!0,result:n})}).once("confirmation",(l,y,b)=>{o&&o({success:!0,result:c||""})})}catch(l){const y=G.M[l.code];console.log(l.message);let b="We had some problem. The transaction wasn't sent.";y&&(b=`${y.title}: ${y.message}. The transaction wasn't sent.`),console.warn(l),o?o({success:!1,result:b}):p.next({success:!1,result:b})}});return function(v){return m.apply(this,arguments)}}())})})}getString(t,e){return this.getProperty(t,e)}getStringArray(t,e){return this.getProperty(t,e)}getBoolean(t,e){var n=this;return(0,a.Z)(function*(){return n.getProperty(t,e)})()}getNumber(t,e){return this.getProperty(t,e)}getBN(t,e){return this.getProperty(t,e)}getProperty(t,e){var n=this;return(0,a.Z)(function*(){try{return yield(yield n.getContract(t)).methods[e]().call({from:n._fromAccount})}catch(o){console.error(o),n._messageService.showMessageAlert("Error",`Unexpected exception when fetching '${e}': ${o.message}`)}})()}justReturnV(t){return t}callPrivate(t,e,n=this.justReturnV,...o){return new h.y(c=>{this.getContract(t).then(d=>{let p;this._web3Service.getUserAccountAddressSubject().subscribe(function(){var g=(0,a.Z)(function*(f){try{p=yield d.methods[e](...o).call({from:f}),c.next({success:!0,result:n(p)})}catch(m){const v=G.M[m.code];let l="We had some problem. The transaction wasn't sent.";v&&(l=`${v.title}: ${v.message}. The transaction wasn't sent.`),console.warn(m),c.next({success:!1,result:l})}});return function(f){return g.apply(this,arguments)}}())})})}}var Z=i(9834),r=i(1571),J=i(529);let L=(()=>{class s extends N{constructor(e,n,o,c){super(c,n,n.currentConfig.contracts.Greeter),this.provider=e,this.wallet=n,this.http=o}getContractABI(){return w.Mt}greet(){var e=this;return(0,a.Z)(function*(){let n=yield yield e.getString(w.Mt,"greet");return console.log(n),n})()}finalSetGreetings(e,n){return this.send(w.Mt,"setGreeting",`Transaction to send  ${e} was sent successfully`,n,`Transaction to finalize tchanged ${e} was confirmed`,e)}}return s.\u0275fac=function(e){return new(e||s)(r.LFG(T.$),r.LFG(C.N),r.LFG(J.eN),r.LFG(Z.t))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var F=i(5593),I=i(1740),P=i(1795);const U=[{path:"",component:j.F,children:[{path:"",component:(()=>{class s{constructor(e,n,o){this.wallet=e,this.greeterService=n,this._messageService=o,this.gform=new u.nJ({saysame:new u.p4("")})}greetMe(){var e=this;return(0,a.Z)(function*(){e.greet=yield e.greeterService.greet(),console.log(e.greet)})()}onApproveClicked(){var e=this;return(0,a.Z)(function*(){console.log("onApproveClicked"),yield e.greeterService.finalSetGreetings(e.gform.value.saysame).subscribe(n=>{e._messageService.showMessageAlert(n.success?"info":"error",n.result)})})()}}return s.\u0275fac=function(e){return new(e||s)(r.Y36(C.N),r.Y36(L),r.Y36(Z.t))},s.\u0275cmp=r.Xpm({type:s,selectors:[["app-greet"]],decls:22,vars:2,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"formgroup-inline"],[1,"field"],["pButton","","pRipple","","type","button","label","Get Greet",1,"p-button-secondary","mr-2","mb-2",3,"click"],[1,"font-medium","ml-2"],[1,"normal-text-color",3,"formGroup"],[1,"col-12","md:col-4"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["type","text","pInputText","","placeholder","sayed","formControlName","saysame"],["pButton","","pRipple","","type","button","label","Write",1,"p-button-secondary","mr-2","mb-2",3,"click"]],template:function(e,n){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),r._uU(4,"Read Contract"),r.qZA(),r.TgZ(5,"div",3)(6,"div",4)(7,"button",5),r.NdJ("click",function(){return n.greetMe()}),r.qZA()(),r.TgZ(8,"div",4)(9,"span",6),r._uU(10),r.qZA()()()()(),r.TgZ(11,"div",1)(12,"div",2)(13,"form",7)(14,"div",8)(15,"div",9)(16,"span",10),r._uU(17,"Say Sameting"),r.qZA(),r._UZ(18,"input",11),r.qZA()(),r.TgZ(19,"div",8)(20,"div",9)(21,"button",12),r.NdJ("click",function(){return n.onApproveClicked()}),r.qZA()()()()()()()),2&e&&(r.xp6(10),r.hij(" ",n.greet," "),r.xp6(3),r.Q6J("formGroup",n.gform))},dependencies:[u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,F.Hq,I.o,P.H]}),s})()}]}];let R=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[A.Bz.forChild(U),A.Bz]}),s})();var W=i(189);let z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[M.ez,u.u5,R,W.m]}),s})()}}]);